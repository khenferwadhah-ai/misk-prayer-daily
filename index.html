<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة مواقيت الصلاة</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Tahoma',Arial;}
body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("background.jpg") no-repeat center center fixed;
  background-size:cover;
}
.overlay{
  width:95%;
  max-width:420px;
  background:rgba(0,0,0,0.72);
  border-radius:18px;
  padding:15px;
  text-align:center;
  color:white;
}
.logo{width:85px;margin-bottom:6px;}
.title {
  font-family: 'Amiri', serif;
  color: #ffffff;
  font-weight: bold;
  text-shadow: 2px 2px 4px #000000, 0 0 6px #ffffff, 0 0 12px #ffffff;
  margin: 6px 0;
}
.clock{
  font-size:48px;
  font-weight:bold;
  margin:10px 0;
  padding:10px 20px;
  border-radius:12px;
  background:rgba(0,255,0,0.15);
  border:2px solid rgba(0,255,0,0.4);
  box-shadow: 0 0 20px rgba(0,255,0,0.6), 0 0 40px rgba(0,255,0,0.3) inset;
  color:#bfff00;
  text-shadow: 0 0 8px #bfff00, 0 0 15px #80ff00;
}
.table{width:100%;font-size:17px;margin-top:10px;}
.row{
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid rgba(255,255,255,.25);
  padding:6px 0;
}
.row.nextPrayer{
  border:2px solid #00ff00;
  border-radius:6px;
  padding:6px 8px;
}
#nextPrayerClock{
  font-size:32px;
  margin-top:8px;
  padding:6px 12px;
  border-radius:10px;
  background:rgba(0,255,0,0.08);
  border:1px solid rgba(0,255,0,0.3);
  box-shadow:0 0 10px rgba(0,255,0,0.4);
  color:#ffffff;
  text-shadow: 2px 2px 4px #000000, 0 0 6px #ffffff, 0 0 12px #ffffff;
}
.next, #nextPrayerClock{
  font-family:'Amiri', serif;
  color:#ffffff;
  font-weight:bold;
  text-shadow:2px 2px 4px #000000,0 0 6px #ffffff,0 0 12px #ffffff;
}
.date{margin:4px 0;font-size:16px;color:#ffd700;}
</style>
</head>
<body>
<div class="overlay">
  <img src="logo.png" class="logo">
  <div class="title">الجمعية الخيرية مسك الختام – القرارم قوقة</div>

  <div class="date" id="gregorian">--</div>
  <div class="date" id="hijri">--</div>

  <div class="clock" id="clock">00:00:00</div>

  <div class="next" id="countdownText">الصلاة القادمة: --</div>
  <div class="clock" id="nextPrayerClock">- --:--:--</div>

  <div class="table" id="prayerTable"></div>
</div>

<script>
// جدول مواقيت الصلاة لكل يوم
const prayerTimes = {
  "2026-02-01": {"الفجر":"06:09","الظهر":"12:49","العصر":"15:40","المغرب":"18:04","العشاء":"19:25"},
  "2026-02-02": {"الفجر":"06:08","الظهر":"12:49","العصر":"15:41","المغرب":"18:05","العشاء":"19:26"},
  "2026-02-03": {"الفجر":"06:07","الظهر":"12:49","العصر":"15:42","المغرب":"18:07","العشاء":"19:27"},
  "2026-02-04": {"الفجر":"06:07","الظهر":"12:49","العصر":"15:42","المغرب":"18:08","العشاء":"19:27"},
  "2026-02-05": {"الفجر":"06:06","الظهر":"12:49","العصر":"15:43","المغرب":"18:09","العشاء":"19:28"},
  "2026-02-06": {"الفجر":"06:05","الظهر":"12:49","العصر":"15:44","المغرب":"18:10","العشاء":"19:29"},
  "2026-02-07": {"الفجر":"06:04","الظهر":"12:50","العصر":"15:45","المغرب":"18:11","العشاء":"19:30"},
  "2026-02-08": {"الفجر":"06:03","الظهر":"12:50","العصر":"15:46","المغرب":"18:12","العشاء":"19:31"},
  "2026-02-09": {"الفجر":"06:03","الظهر":"12:50","العصر":"15:47","المغرب":"18:13","العشاء":"19:32"},
  "2026-02-10": {"الفجر":"06:02","الظهر":"12:50","العصر":"15:47","المغرب":"18:14","العشاء":"19:33"},
  "2026-02-11": {"الفجر":"06:01","الظهر":"12:50","العصر":"15:48","المغرب":"18:15","العشاء":"19:34"},
  "2026-02-12": {"الفجر":"06:00","الظهر":"12:50","العصر":"15:49","المغرب":"18:16","العشاء":"19:35"},
  "2026-02-13": {"الفجر":"05:59","الظهر":"12:50","العصر":"15:50","المغرب":"18:17","العشاء":"19:36"}
};

// إعادة تنسيق التاريخ yyyy-mm-dd
function formatDate(date){
  const y=date.getFullYear();
  const m=String(date.getMonth()+1).padStart(2,'0');
  const d=String(date.getDate()).padStart(2,'0');
  return `${y}-${m}-${d}`;
}

// إنشاء جدول الصلوات وعرض اليوم الحالي مباشرة
function renderPrayerTable(){
  const today=formatDate(new Date());
  const todayTimes=prayerTimes[today] || {};
  const container=document.getElementById("prayerTable");
  container.innerHTML="";
  for(let name of ["الفجر","الظهر","العصر","المغرب","العشاء"]){
    const div=document.createElement("div");
    div.className="row";
    div.dataset.name=name;
    div.innerHTML=`<span>${name}</span><span>${todayTimes[name]||"--:--"}</span>`;
    container.appendChild(div);
  }
}

// الساعة والتاريخ
function updateClockAndDates(){
  const now=new Date();
  document.getElementById("clock").innerText=now.toLocaleTimeString("ar-DZ",{hour12:false});
  document.getElementById("gregorian").innerText=now.toLocaleDateString("ar-DZ",{
    weekday:"long", year:"numeric", month:"long", day:"numeric"
  });
  const cutoff=new Date("2026-02-01T00:00:00");
  const hijriDate=now<cutoff?"12 شعبان 1447":now.toLocaleDateString('ar-SA-u-ca-islamic',{day:'numeric', month:'long', year:'numeric'});
  document.getElementById("hijri").innerText=hijriDate;
}

// العد التنازلي للصلاة القادمة
function updateNextPrayerCountdown(){
  const now=new Date();
  const today=formatDate(now);
  const todayTimes=prayerTimes[today] || {};
  const rows=document.querySelectorAll(".row");
  let targetTime=null;
  let nextPrayerName="";
  let nextRow=null;

  rows.forEach(r=>r.classList.remove("nextPrayer")); // إزالة تمييز سابق

  for(let i=0;i<rows.length;i++){
    const name=rows[i].dataset.name;
    const time=todayTimes[name];
    if(!time) continue;
    const [h,m]=time.split(":").map(Number);
    const total=h*60+m;
    const currentMinutes=now.getHours()*60+now.getMinutes();
    if(total>currentMinutes){
      targetTime=new Date();
      targetTime.setHours(h,m,0,0);
      nextPrayerName=name;
      nextRow=rows[i];
      break;
    }
  }

  if(!targetTime){ // إذا انتهت كل الصلوات اليوم
    const nextDay=formatDate(new Date(now.getTime()+24*60*60*1000));
    const nextTimes=prayerTimes[nextDay] || {};
    const name=Object.keys(nextTimes)[0];
    const [h,m]=nextTimes[name].split(":").map(Number);
    targetTime=new Date();
    targetTime.setDate(targetTime.getDate()+1);
    targetTime.setHours(h,m,0,0);
    nextPrayerName=name;
    nextRow=rows[0];
  }

  if(nextRow) nextRow.classList.add("nextPrayer");

  const diff=Math.max(0,targetTime-now);
  const hrs=String(Math.floor(diff/3600000)).padStart(2,"0");
  const mins=String(Math.floor((diff%3600000)/60000)).padStart(2,"0");
  const secs=String(Math.floor((diff%60000)/1000)).padStart(2,"0");

  document.getElementById("nextPrayerClock").innerText=`- ${hrs}:${mins}:${secs}`;
  document.getElementById("countdownText").innerText=`الصلاة القادمة: ${nextPrayerName}`;
}

// تشغيل الوظائف
renderPrayerTable();
setInterval(updateClockAndDates,1000);
updateClockAndDates();
setInterval(updateNextPrayerCountdown,1000);
updateNextPrayerCountdown();