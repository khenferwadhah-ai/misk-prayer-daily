<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة مواقيت الصلاة</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Tahoma',Arial;}
body{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:url("background.jpg") no-repeat center center fixed;
  background-size:cover;
}
.overlay{
  width:95%;
  max-width:420px;
  background:rgba(0,0,0,0.72);
  border-radius:18px;
  padding:15px;
  text-align:center;
  color:white;
}
.logo-box{
  position:relative;
  width:100px;
  height:100px;
  margin:0 auto 8px;
}
.logo-box img{
  width:100%;
  height:100%;
  border-radius:50%;
}
.logo-box canvas{
  position:absolute;
  top:0;
  left:0;
}
.title{
  font-family:'Amiri',serif;
  font-weight:bold;
  margin:6px 0;
}
.date{margin:4px 0;}
#nextBox{
  margin:10px 0;
  padding:6px;
  border:2px solid gold;
  border-radius:10px;
  font-weight:bold;
  color:white;
}
#nextPrayerClock{
  font-size:32px;
  margin:8px 0;
}
.table{margin-top:10px;}
.row{
  display:flex;
  justify-content:space-between;
  padding:6px 0;
  border-bottom:1px solid rgba(255,255,255,.25);
}
.row.nextPrayer{
  border:2px solid gold;
  border-radius:6px;
  padding:6px;
}
.footer{
  margin-top:10px;
  font-size:12px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:5px;
  opacity:.8;
}
.footer img{
  width:16px;
  height:16px;
}
</style>
</head>

<body>
<div class="overlay">

  <!-- اللوغو مع الساعة -->
  <div class="logo-box">
    <img src="logo.png">
    <canvas id="logoClock" width="100" height="100"></canvas>
  </div>

  <div class="title">الجمعية الخيرية مسك الختام – القرارم قوقة</div>
  <div class="date" id="gregorian"></div>
  <div class="date" id="hijri"></div>

  <div id="nextBox">الصلاة القادمة: <span id="nextName"></span></div>
  <div id="nextPrayerClock">--:--:--</div>

  <div class="table" id="prayerTable"></div>

  <div class="footer">
    <img src="logo.png">
    misk elkhithem ©
  </div>

</div>

<script>
// مواقيت الصلاة
const prayers=[
 {name:"الفجر",time:"06:09"},
 {name:"الشروق",time:"07:38"},
 {name:"الظهر",time:"12:49"},
 {name:"العصر",time:"15:39"},
 {name:"المغرب",time:"18:03"},
 {name:"العشاء",time:"19:24"}
];

// جدول الصلاة
const table=document.getElementById("prayerTable");
prayers.forEach(p=>{
 const d=document.createElement("div");
 d.className="row";
 d.innerHTML=`<span>${p.name}</span><span>${p.time}</span>`;
 table.appendChild(d);
});

// التاريخ
function updateDates(){
 const now=new Date();
 document.getElementById("gregorian").innerText=
  now.toLocaleDateString("ar-DZ",{weekday:"long",day:"numeric",month:"long",year:"numeric"});

 const hijri=new Intl.DateTimeFormat('ar-TN-u-ca-islamic',{
  day:'numeric',month:'long',year:'numeric'
 }).format(now);

 // تبديل 12 شعبان 1447 إلى 13 شعبان 1447 فقط
 document.getElementById("hijri").innerText=hijri.replace("١٣","١٢");
}
updateDates();
setInterval(updateDates,60000);

// العد التنازلي
function updateNext(){
 const rows=document.querySelectorAll(".row");
 rows.forEach(r=>r.classList.remove("nextPrayer"));
 const now=new Date();
 let target,name,row;

 for(let i=0;i<prayers.length;i++){
  const [h,m]=prayers[i].time.split(":").map(Number);
  if(h*60+m > now.getHours()*60+now.getMinutes()){
    target=new Date();
    target.setHours(h,m,0,0);
    name=prayers[i].name;
    row=rows[i];
    break;
  }
 }
 if(!target){
  const [h,m]=prayers[0].time.split(":").map(Number);
  target=new Date();
  target.setDate(target.getDate()+1);
  target.setHours(h,m,0,0);
  name=prayers[0].name;
  row=rows[0];
 }

 row.classList.add("nextPrayer");
 document.getElementById("nextName").innerText=name;

 const diff=target-now;
 const h=String(Math.floor(diff/3600000)).padStart(2,"0");
 const m=String(Math.floor(diff%3600000/60000)).padStart(2,"0");
 const s=String(Math.floor(diff%60000/1000)).padStart(2,"0");
 document.getElementById("nextPrayerClock").innerText=`${h}:${m}:${s}`;
}
setInterval(updateNext,1000);
updateNext();

// ساعة داخل اللوغو
const canvas=document.getElementById("logoClock");
const ctx=canvas.getContext("2d");
const r=canvas.width/2;
ctx.translate(r,r);

function drawClock(){
 ctx.clearRect(-r,-r,canvas.width,canvas.height);

 // إطار الساعة
 ctx.beginPath();
 ctx.arc(0,0,r-2,0,Math.PI*2);
 ctx.strokeStyle="black";
 ctx.lineWidth=2;
 ctx.stroke();

 // الأرقام
 ctx.fillStyle="black";
 ctx.font=r*0.18+"px Arial";
 ctx.textAlign="center";
 ctx.textBaseline="middle";
 for(let n=1;n<=12;n++){
  const ang=n*Math.PI/6-Math.PI/2;
  ctx.fillText(n,Math.cos(ang)*r*0.75,Math.sin(ang)*r*0.75);
 }

 const now=new Date();
 drawHand((now.getHours()%12)*30+now.getMinutes()/2,r*0.5,4,"black"); // الساعات
 drawHand(now.getMinutes()*6,r*0.7,3,"black"); // الدقائق
 drawHand(now.getSeconds()*6,r*0.85,1,"red"); // الثواني (أحمر)
}

function drawHand(deg,len,w,color){
 ctx.beginPath();
 ctx.rotate(deg*Math.PI/180);
 ctx.moveTo(0,0);
 ctx.lineTo(0,-len);
 ctx.strokeStyle=color;
 ctx.lineWidth=w;
 ctx.stroke();
 ctx.rotate(-deg*Math.PI/180);
}

setInterval(drawClock,1000);
drawClock();
</script>

</body>
</html>